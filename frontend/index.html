<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<!-- –§–æ—Ä–º–∞ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è -->
<div id="setupOverlay" class="auth-overlay" style="display: none;">
    <div class="auth-container">
        <h2>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è</h2>
        <p>–≠—Ç–æ –≤–∞—à –ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö.</p>

        <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–û–†–ú–ê -->
        <form id="setupForm">
            <div class="form-group">
                <label for="setupPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                <input type="password" id="setupPassword" required minlength="4"
                       placeholder="–ù–µ –º–µ–Ω–µ–µ 4 —Å–∏–º–≤–æ–ª–æ–≤">
            </div>
            <div class="form-group">
                <label for="setupPasswordConfirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
                <input type="password" id="setupPasswordConfirm" required minlength="4"
                       placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>

            <button type="submit" class="auth-btn">
                –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
            </button>
        </form>

        <div id="setupError" class="error-message" style="display: none;"></div>

        <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        <button onclick="window.testPasswordSetup()"
                style="margin-top: 10px; background: #666; width: 100%; padding: 10px; border: none; border-radius: 8px; color: white; cursor: pointer;">
            üîê –¢–ï–°–¢: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
        </button>-->
    </div>
</div>

<!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
<div id="loginOverlay" class="auth-overlay" style="display: none;">
    <div class="auth-container">
        <h2>–í—Ö–æ–¥ –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit" class="auth-btn">–í–æ–π—Ç–∏</button>
        </form>
        <div id="loginError" class="error-message" style="display: none;"></div>
    </div>
</div>

<div class="container" id="mainApp" style="display: none;">
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <h1>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä</h1>
        <div class="header-controls">
            <div class="period-selector">
                <select id="periodSelect">
                    <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                    <option value="week">–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è</option>
                    <option value="month" selected>–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
                    <option value="quarter">–¢–µ–∫—É—â–∏–π –∫–≤–∞—Ä—Ç–∞–ª</option>
                    <option value="year">–¢–µ–∫—É—â–∏–π –≥–æ–¥</option>
                    <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                    <option value="custom">–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥</option>
                </select>
                <div id="customDateRange" class="custom-dates" style="display: none;">
                    <input type="date" id="startDate">
                    <input type="date" id="endDate">
                    <button onclick="applyCustomDates()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
            <div class="view-toggle">
                <label class="view-btn">
                    <input type="radio" name="view" value="main" checked onchange="switchView('main')">
                    <span>–û—Å–Ω–æ–≤–Ω–∞—è</span>
                </label>
                <label class="view-btn">
                    <input type="radio" name="view" value="savings" onchange="switchView('savings')">
                    <span>–ö–æ–ø–∏–ª–∫–∞</span>
                </label>
                <label class="view-btn">
                    <input type="radio" name="view" value="settings" onchange="switchView('settings')">
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </label>
                <label class="view-btn">
                    <input type="radio" name="view" value="edit" onchange="switchView('edit')">
                    <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å<br>—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</span>
                </label>
            </div>
        </div>
    </header>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="stats-cards">
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stat-card income main-view">
            <h3>–î–æ—Ö–æ–¥—ã</h3>
            <p id="totalIncome" class="amount">0 ‚ÇΩ</p>
        </div>
        <div class="stat-card expense main-view">
            <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
            <p id="totalExpense" class="amount">0 ‚ÇΩ</p>
        </div>
        <div class="stat-card balance main-view">
            <h3>–ë–∞–ª–∞–Ω—Å</h3>
            <p id="totalBalance" class="amount">0 ‚ÇΩ</p>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–ø–∏–ª–∫–∏ - –ú–ï–ù–Ø–ï–ú –ü–û–†–Ø–î–û–ö -->
        <div class="stat-card savings-expense savings-view" style="display: none;">
            <h3>–í –∫–æ–ø–∏–ª–∫—É</h3>
            <p id="savingsExpense" class="amount">0 ‚ÇΩ</p>
        </div>
        <div class="stat-card savings-income savings-view" style="display: none;">
            <h3>–ò–∑ –∫–æ–ø–∏–ª–∫–∏</h3>
            <p id="savingsIncome" class="amount">0 ‚ÇΩ</p>
        </div>
        <div class="stat-card savings-balance savings-view" style="display: none;">
            <h3>–ë–∞–ª–∞–Ω—Å –∫–æ–ø–∏–ª–∫–∏</h3>
            <p id="savingsBalance" class="amount">0 ‚ÇΩ</p>
        </div>
    </div>

    <div class="main-content">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –§–æ—Ä–º—ã -->
        <div class="left-column">
            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
            <div class="card">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h3>
                <form id="transactionForm" class="form">
                    <div class="form-group">
                        <label>–¢–∏–ø:</label>
                        <select id="transactionType" onchange="updateCategories()">
                            <option value="income">–î–æ—Ö–æ–¥</option>
                            <option value="expense" selected>–†–∞—Å—Ö–æ–¥</option>
                            <option value="savings_income">–ò–∑ –∫–æ–ø–∏–ª–∫–∏</option>
                            <option value="savings_expense">–í –∫–æ–ø–∏–ª–∫—É</option>
                        </select>
                        <small style="color: #666; font-size: 12px; margin-top: 5px;">
                            ‚Ä¢ –î–æ—Ö–æ–¥/–†–∞—Å—Ö–æ–¥ - –æ–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏<br>
                            ‚Ä¢ –ò–∑ –∫–æ–ø–∏–ª–∫–∏ - –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –∏–∑ —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π<br>
                            ‚Ä¢ –í –∫–æ–ø–∏–ª–∫—É - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π
                        </small>
                    </div>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="categorySelect" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–°—É–º–º–∞:</label>
                        <input type="number" id="amount" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞:</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <input type="text" id="description" placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
                    </div>
                    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
                </form>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            <div class="card">
                <h3>üè∑Ô∏è –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
                <form id="categoryForm" class="form">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="categoryName" required>
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø:</label>
                        <select id="categoryType">
                            <option value="income">–î–æ—Ö–æ–¥</option>
                            <option value="expense" selected>–†–∞—Å—Ö–æ–¥</option>
                            <option value="savings_income">–ò–∑ –∫–æ–ø–∏–ª–∫–∏</option>
                            <option value="savings_expense">–í –∫–æ–ø–∏–ª–∫—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç:</label>
                        <input type="color" id="categoryColor" value="#007bff">
                    </div>
                    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –î–∞–Ω–Ω—ã–µ -->
        <div class="right-column">
            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            <div class="card main-view">
                <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="dailyChart"></canvas>
                </div>
            </div>

            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –∫–æ–ø–∏–ª–∫–∏ -->
            <div class="card savings-view" style="display: none;">
                <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–ø–∏–ª–∫–∏</h3>
                <div class="chart-container">
                    <canvas id="savingsCategoryChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="savingsDailyChart"></canvas>
                </div>
            </div>

            <!-- –ë–ª–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div class="card settings-view" style="display: none;">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <div class="settings-content">
                    <div class="settings-section">
                        <h4>üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h4>
                        <div id="categoriesSettings" class="categories-settings">
                            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                        </div>
                    </div>

                    <!-- –°–µ–∫—Ü–∏—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
                    <div class="settings-section">
                        <h4>üîí –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h4>
                        <form id="changePasswordForm">
                            <div class="form-group">
                                <label for="oldPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å:</label>
                                <input type="password" id="oldPassword" required>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                                <input type="password" id="newPassword" required minlength="4">
                            </div>
                            <div class="form-group">
                                <label for="newPasswordConfirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                                <input type="password" id="newPasswordConfirm" required minlength="4">
                            </div>
                            <button type="submit" class="auth-btn">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                        </form>
                        <div id="changePasswordMessage" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- –±–ª–æ–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <div class="card edit-view" style="display: none;">
                <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>

                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="pagination-controls">
                    <button id="prevPage" onclick="app.prevPage()">‚Üê –ù–∞–∑–∞–¥</button>
                    <span id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                    <button id="nextPage" onclick="app.nextPage()">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
                    <select id="pageSize" onchange="app.changePageSize()">
                        <option value="10">10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                        <option value="20">20 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                        <option value="50">50 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                    </select>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                <div id="editTransactionsList" class="edit-transactions-list">
                    <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–ü–û–î–ù–ò–ú–ê–ï–ú –í–´–®–ï) -->
            <div class="card main-view">
                <h3>üè∑Ô∏è –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                <div id="categoryAnalytics" class="category-analytics">
                    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–ø–∏–ª–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–ü–û–î–ù–ò–ú–ê–ï–ú –í–´–®–ï) -->
            <div class="card savings-view" style="display: none;">
                <h3>üè∑Ô∏è –ö–æ–ø–∏–ª–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                <div id="savingsCategoryAnalytics" class="category-analytics">
                    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–ø–∏–ª–∫–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–û–ü–£–°–ö–ê–ï–ú –ù–ò–ñ–ï) -->
            <div class="card">
                <h3>üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h3>
                <div id="transactionsList" class="transactions-list">
                    <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>